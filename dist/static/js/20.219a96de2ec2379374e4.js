webpackJsonp([20],{Ar8I:function(t,e){},PjKN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("3as3"),i=a("lbHh"),s=a.n(i),d={name:"group2bdList",data:function(){return{bdId:"",bdName:"",groupId:"",groupName:"",list:[],total:0,page:1,limit:10,dialogVisible:!1,dialogTitle:"",bdId_dialog:"",groupId_dialog:"",bdIdList:[],groupIdList:[],addBtnStatus:!1,updateBtnStatus:!1,checkStatus:!0,oldBdId:"",oldGroupId:""}},mounted:function(){this.searchList(),this.getBdIdList(),this.getGroupIdList()},methods:{getBdIdList:function(){var t=this;this.$axios.get("bd/bdList?start=&limit=&bdId=&bdName=&address=").then(function(e){t.bdIdList=e.data.data.list}).catch(function(t){console.log(t)})},getGroupIdList:function(){var t=this;this.$axios.get("group/groupList?start=&limit=&groupId=&groupName=&type=&structure="+this.$store.getters.info.role).then(function(e){t.groupIdList=e.data.data.list}).catch(function(t){console.log(t)})},deleteGroup2BD:function(t,e){var a=this;console.log(t,e),this.$confirm("是否确认删除该条记录？ 组Id:"+e.groupId+"  局向码:"+e.bdId,"确认删除",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){a.$axios.get("group2bd/deleteGroup2BD?bdId="+e.bdId+"&groupId="+e.groupId).then(function(){a.alertMessage("删除成功"),a.searchList()}).catch(function(t){a.alertMessage("删除失败"+t)})}).catch(function(t){console.log(t)})},updateGroup2BD:function(){var t=this,e={bdId:this.bdId_dialog,groupId:this.groupId_dialog,oldBdId:this.oldBdId,oldGroupId:this.oldGroupId};this.$axios.post("group2bd/updateGroup2BD",e).then(function(){t.alertMessage("更新成功"),t.searchList()}).catch(function(e){t.alertMessage("更新失败"+e)}),this.dialogVisible=!1},addGroup2BD:function(){var t=this,e={bdId:this.bdId_dialog,groupId:this.groupId_dialog};this.$axios.post("group2bd/addGroup2BD",e).then(function(){t.alertMessage("添加成功"),t.searchList()}).catch(function(e){t.alertMessage("添加失败"+e)}),this.dialogVisible=!1},alertMessage:function(t){var e=this.$createElement;this.$message({message:e("p",null,[e("span",{style:"color: teal"},t)])})},checkGroup2BD:function(){var t=this;if(console.log("准备检索"),this.bdId_dialog!==this.oldBdId||this.groupId_dialog!==this.oldGroupId)return""===this.bdId_dialog||""===this.groupId_dialog?(this.checkStatus=!0,void this.alertMessage("请选择组id或局向码")):void this.$axios.get("group2bd/checkGroup2BD?bdId="+this.bdId_dialog+"&groupId="+this.groupId_dialog).then(function(e){console.log(e),e.data.data?(t.checkStatus=!0,t.alertMessage("该组和局向关联已存在")):t.checkStatus=!1}).catch(function(t){console.log(t)})},showUpdateDialog:function(t,e){console.log(e),this.dialogTitle="修改关联",this.bdId_dialog=e.bdId,this.groupId_dialog=e.groupId,this.oldBdId=e.bdId,this.oldGroupId=e.groupId,this.addBtnStatus=!1,this.updateBtnStatus=!0,this.dialogVisible=!0,this.checkStatus=!1},showAddDialog:function(){this.dialogTitle="添加关联",this.bdId_dialog="",this.groupId_dialog="",this.addBtnStatus=!0,this.updateBtnStatus=!1,this.dialogVisible=!0,this.checkStatus=!0},handleClose:function(t){t()},axiosUrl:function(){var t=this,e=(this.page-1)*this.limit,a=this.limit;this.$axios.get("group2bd/group2bdList?start="+e+"&limit="+a+"&bdId="+this.bdId+"&bdName="+this.bdName+"&groupId="+this.groupId+"&groupName="+this.groupName).then(function(e){t.list=e.data.data.list,t.total=e.data.data.total}).catch(function(t){console.log(t),s.a.remove("token"),location.reload()})},searchList:function(){this.page=1,this.axiosUrl()},changeList:function(t){t&&(this.limit=t.limit),this.axiosUrl()},clearInput:function(){this.bdId="",this.bdName="",this.groupId="",this.groupName="",this.searchList()},filterHandler:function(t,e,a){return e[a.property]===t}},components:{Pagination:o.a}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入组ID",maxlength:"30","show-word-limit":""},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}}),t._v(" "),a("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入组名称",maxlength:"50","show-word-limit":""},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}}),t._v(" "),a("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入局向码",maxlength:"30","show-word-limit":""},model:{value:t.bdId,callback:function(e){t.bdId=e},expression:"bdId"}}),t._v(" "),a("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入局向名称",maxlength:"50","show-word-limit":""},model:{value:t.bdName,callback:function(e){t.bdName=e},expression:"bdName"}}),t._v(" "),a("el-button",{staticClass:"searchBtn",attrs:{type:"success",loading:!1},on:{click:t.searchList}},[t._v("查 询")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:t.clearInput}},[t._v("清 空")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.showAddDialog}},[t._v("创 建")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),t._v(" "),a("el-table-column",{attrs:{prop:"groupId",label:"组ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"组名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bdId",label:"局向码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bdName",label:"局向名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.showUpdateDialog(e.$index,e.row)}}},[t._v("修改\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.deleteGroup2BD(e.$index,e.row)}}},[t._v("删除\n          ")])]}}])})],1)],t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.page,limit:t.limit},on:{"update:page":function(e){t.page=e},"update:limit":function(e){t.limit=e},pagination:t.changeList}}),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择组"},on:{change:t.checkGroup2BD},model:{value:t.groupId_dialog,callback:function(e){t.groupId_dialog=e},expression:"groupId_dialog"}},t._l(t.groupIdList,function(t){return a("el-option",{key:t.groupId,attrs:{label:t.groupId+" "+t.groupName,value:t.groupId}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择局向"},on:{change:t.checkGroup2BD},model:{value:t.bdId_dialog,callback:function(e){t.bdId_dialog=e},expression:"bdId_dialog"}},t._l(t.bdIdList,function(t){return a("el-option",{key:t.bdId,attrs:{label:t.bdId+" "+t.bdName,value:t.bdId}})}),1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.addBtnStatus,expression:"addBtnStatus"}],attrs:{type:"primary",disabled:t.checkStatus},on:{click:t.addGroup2BD}},[t._v("添 加")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.updateBtnStatus,expression:"updateBtnStatus"}],attrs:{type:"primary",disabled:t.checkStatus},on:{click:t.updateGroup2BD}},[t._v("更 新")])],1)],1)],2)},staticRenderFns:[]};var n=a("VU/8")(d,l,!1,function(t){a("Ar8I")},"data-v-432f64a8",null);e.default=n.exports}});
//# sourceMappingURL=20.219a96de2ec2379374e4.js.map