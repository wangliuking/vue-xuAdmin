webpackJsonp([16],{HbUW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("3as3"),n=a("lbHh"),s=a.n(n),i={name:"smsList",data:function(){return{srcId:"",tarId:"",type:"",list:[],total:0,page:1,limit:10,options:[{id:1,name:"单呼"},{id:2,name:"组呼"}]}},mounted:function(){this.searchList()},methods:{deleteSms:function(t,e){var a=this;console.log(t,e),this.$confirm("是否确认删除该条记录？ ID:"+e.id,"确认删除",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){a.$axios.get("sms/deleteSms?id="+e.id).then(function(){a.alertMessage("删除成功"),a.searchList()}).catch(function(t){a.alertMessage("删除失败"+t)})}).catch(function(t){console.log(t)})},alertMessage:function(t){var e=this.$createElement;this.$message({message:e("p",null,[e("span",{style:"color: teal"},t)])})},handleClose:function(t){t()},axiosUrl:function(){var t=this,e=(this.page-1)*this.limit,a=this.limit;this.$axios.get("sms/smsList?start="+e+"&limit="+a+"&srcId="+this.srcId+"&tarId="+this.tarId+"&type="+this.type).then(function(e){t.list=e.data.data.list,t.total=e.data.data.total}).catch(function(t){console.log(t),s.a.remove("token"),location.reload()})},searchList:function(){this.page=1,this.axiosUrl()},changeList:function(t){t&&(this.limit=t.limit),this.axiosUrl()},clearInput:function(){this.srcId="",this.tarId="",this.type="",this.searchList()},filterHandler:function(t,e,a){return e[a.property]===t},filterTag:function(t,e){return e.type===t}},components:{Pagination:l.a}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入源ID",maxlength:"30","show-word-limit":""},model:{value:t.srcId,callback:function(e){t.srcId=e},expression:"srcId"}}),t._v(" "),a("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入目标ID",maxlength:"30","show-word-limit":""},model:{value:t.tarId,callback:function(e){t.tarId=e},expression:"tarId"}}),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择类型"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("el-button",{staticClass:"searchBtn",attrs:{type:"success",loading:!1},on:{click:t.searchList}},[t._v("查 询")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:t.clearInput}},[t._v("清 空")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),t._v(" "),a("el-table-column",{attrs:{prop:"srcId",label:"源ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tarId",label:"目标ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",filters:[{text:"单呼",value:1},{text:"组呼",value:2}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:1===e.row.type?"warning":"info","disable-transitions":""}},[t._v(t._s(1===e.row.type?"单呼":"组呼")+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sendTime",label:"发送时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"callId",label:"短信会议ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"发送状态",filters:[{text:"成功",value:0},{text:"失败",value:1}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:0===e.row.status?"success":"danger","disable-transitions":""}},[t._v(t._s(0===e.row.status?"成功":"失败")+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.deleteSms(e.$index,e.row)}}},[t._v("删除\n          ")])]}}])})],1)],t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.page,limit:t.limit},on:{"update:page":function(e){t.page=e},"update:limit":function(e){t.limit=e},pagination:t.changeList}})],2)},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(t){a("IOx8")},"data-v-55b41944",null);e.default=r.exports},IOx8:function(t,e){}});
//# sourceMappingURL=16.6dda2963c43892589422.js.map