webpackJsonp([6],{"5MyB":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("XLwt"),n=a.n(i),s=(a("1Fjz"),{name:"lineEcharts",props:{id:{type:String,default:"myChart"},width:{type:String,default:"100%"},height:{type:String,default:"100%"},echartsData:{type:Array,default:[]}},data:function(){return{chart:null}},mounted:function(){},watch:{echartsData:function(){this.initChart()}},methods:{initChart:function(){null==this.chart&&(this.chart=n.a.init(document.getElementById(this.id),"westeros")),this.chart.setOption({tooltip:{trigger:"item",triggerOn:"mousemove"},series:[{type:"tree",data:this.echartsData,left:"2%",right:"2%",top:"15%",bottom:"10%",symbol:"emptyCircle",orient:"vertical",expandAndCollapse:!0,initialTreeDepth:7,label:{normal:{position:"top",rotate:0,verticalAlign:"middle",align:"right",fontSize:20}},leaves:{label:{normal:{position:"top",rotate:0,verticalAlign:"middle",align:"right",fontSize:20}}},animationDurationUpdate:750}]})}}}),l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{style:{width:this.width,height:this.height},attrs:{id:this.id}})])},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(t){a("WYXa")},"data-v-5a498097",null).exports,r=a("lbHh"),c=a.n(r),d={components:{TreeEcharts:o},data:function(){return{treeModel:[],echartsData:[],defaultProps:{children:"children",label:"label"},dialogVisible:!1,dialogTitle:"",id_dialog:"",pId_dialog:"",label_dialog:"",level_dialog:"",addBtnStatus:!1,updateBtnStatus:!1,checkStatus:!0}},mounted:function(){this.getStructureTree(),this.getTreeEchart()},methods:{getStructureTree:function(){var t=this;this.$axios.get("structure/selectAllStructure?structure="+this.$store.getters.info.role).then(function(e){t.treeModel=e.data}).catch(function(t){console.log(t),c.a.remove("token"),location.reload()})},getTreeEchart:function(){var t=this;this.$axios.get("structure/treeEchart?structure="+this.$store.getters.info.role).then(function(e){t.echartsData=e.data}).catch(function(t){console.log(t)})},checkWord:function(){""===this.label_dialog?(this.checkStatus=!0,this.alertMessage("名称不能为空")):this.checkStatus=!1},deleteTree:function(t){var e=this;console.log(t),this.$confirm("是否确认删除该节点及子节点？ ID:"+t.id,"确认删除",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){e.$axios.get("structure/deleteStructure?id="+t.id).then(function(){e.alertMessage("删除成功"),e.getStructureTree(),e.getTreeEchart()}).catch(function(t){e.alertMessage("删除失败"+t)})}).catch(function(t){console.log(t)})},updateTree:function(){var t=this,e={id:this.id_dialog,label:this.label_dialog};this.$axios.post("structure/updateStructure",e).then(function(){t.alertMessage("更新成功"),t.getStructureTree(),t.getTreeEchart()}).catch(function(e){t.alertMessage("更新失败"+e)}),this.dialogVisible=!1},addTree:function(){var t=this,e={id:this.pId_dialog,label:this.label_dialog,level:this.level_dialog};this.$axios.post("structure/insertStructure",e).then(function(){t.alertMessage("添加成功"),t.getStructureTree(),t.getTreeEchart()}).catch(function(e){t.alertMessage("添加失败"+e)}),this.dialogVisible=!1},append:function(t){this.dialogTitle="添加",this.label_dialog="",this.pId_dialog=t.id,this.level_dialog=t.level,this.addBtnStatus=!0,this.updateBtnStatus=!1,this.dialogVisible=!0,this.checkStatus=!0},remove:function(t){this.deleteTree(t)},update:function(t){this.dialogTitle="修改",this.id_dialog=t.id,this.label_dialog=t.label,this.addBtnStatus=!1,this.updateBtnStatus=!0,this.dialogVisible=!0,this.checkStatus=!0},renderContent:function(t,e){var a=this,i=e.node,n=e.data;e.store;return t("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[t("span",[" ",t("span",[" ",i.label])]),t("span",[t("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.append(n)}}},["添加"]),t("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.remove(n)}}},["删除"]),t("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.update(n)}}},["修改"])])])},alertMessage:function(t){var e=this.$createElement;this.$message({message:e("p",null,[e("span",{style:"color: teal"},t)])})},handleClose:function(t){t()}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-tree",{attrs:{data:t.treeModel,props:t.defaultProps,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":t.renderContent}})],1),t._v(" "),a("el-col",{attrs:{span:18}},[a("tree-echarts",{attrs:{id:"treeEcharts",height:"300px",echartsData:t.echartsData}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"text",placeholder:"请输入名称",maxlength:"50","show-word-limit":""},on:{focus:function(e){t.checkStatus=!0},blur:t.checkWord},model:{value:t.label_dialog,callback:function(e){t.label_dialog=e},expression:"label_dialog"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.addBtnStatus,expression:"addBtnStatus"}],attrs:{type:"primary",disabled:t.checkStatus},on:{click:t.addTree}},[t._v("添 加")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.updateBtnStatus,expression:"updateBtnStatus"}],attrs:{type:"primary",disabled:t.checkStatus},on:{click:t.updateTree}},[t._v("更 新")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(d,u,!1,function(t){a("OHxe")},"data-v-4a4d29f9",null);e.default=h.exports},OHxe:function(t,e){},WYXa:function(t,e){}});
//# sourceMappingURL=6.ee3602e17cfe44e849f5.js.map