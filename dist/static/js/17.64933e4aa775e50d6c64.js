webpackJsonp([17],{"+lfe":function(t,l){},qwYE:function(t,l,e){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var a=e("3as3"),n=e("lbHh"),i=e.n(n),s={name:"callInfoList",data:function(){return{callId:"",callingId:"",calledId:"",list:[],total:0,page:1,limit:10,prefix:"http://47.108.93.159:50006"}},mounted:function(){this.searchList()},methods:{deleteCallInfo:function(t,l){var e=this;console.log(t,l),this.$confirm("是否确认删除该条记录？ ID:"+l.id,"确认删除",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){e.$axios.get("callInfo/deleteCallInfo?id="+l.id).then(function(){e.alertMessage("删除成功"),e.searchList()}).catch(function(t){e.alertMessage("删除失败"+t)})}).catch(function(t){console.log(t)})},alertMessage:function(t){var l=this.$createElement;this.$message({message:l("p",null,[l("span",{style:"color: teal"},t)])})},handleClose:function(t){t()},axiosUrl:function(){var t=this,l=(this.page-1)*this.limit,e=this.limit;this.$axios.get("callInfo/callInfoList?start="+l+"&limit="+e+"&callId="+this.callId+"&callingId="+this.callingId+"&calledId="+this.calledId).then(function(l){t.list=l.data.data.list,t.total=l.data.data.total}).catch(function(t){console.log(t),i.a.remove("token"),location.reload()})},searchList:function(){this.page=1,this.axiosUrl()},changeList:function(t){t&&(this.limit=t.limit),this.axiosUrl()},clearInput:function(){this.callId="",this.callingId="",this.calledId="",this.searchList()},filterTag:function(t,l){return l.type===t}},components:{Pagination:a.a}},o={render:function(){var t=this,l=t.$createElement,e=t._self._c||l;return e("div",[e("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入呼叫会议ID",maxlength:"30","show-word-limit":""},model:{value:t.callId,callback:function(l){t.callId=l},expression:"callId"}}),t._v(" "),e("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入主叫ID",maxlength:"30","show-word-limit":""},model:{value:t.callingId,callback:function(l){t.callingId=l},expression:"callingId"}}),t._v(" "),e("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入被叫ID",maxlength:"30","show-word-limit":""},model:{value:t.calledId,callback:function(l){t.calledId=l},expression:"calledId"}}),t._v(" "),e("el-button",{staticClass:"searchBtn",attrs:{type:"success",loading:!1},on:{click:t.searchList}},[t._v("查 询")]),t._v(" "),e("el-button",{attrs:{type:"warning"},on:{click:t.clearInput}},[t._v("清 空")]),t._v(" "),[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[e("el-table-column",{attrs:{type:"index",label:"#"}}),t._v(" "),e("el-table-column",{attrs:{prop:"callId",label:"呼叫会议ID"}}),t._v(" "),e("el-table-column",{attrs:{prop:"callingId",label:"主叫ID"}}),t._v(" "),e("el-table-column",{attrs:{prop:"calledId",label:"被叫ID"}}),t._v(" "),e("el-table-column",{attrs:{prop:"pttId",label:"PTT ID"}}),t._v(" "),e("el-table-column",{attrs:{prop:"callStatus",label:"呼叫状态",filters:[{text:"成功",value:0},{text:"失败",value:1}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(l){return[e("el-tag",{attrs:{type:0===l.row.callStatus?"success":"danger","disable-transitions":""}},[t._v(t._s(0===l.row.callStatus?"成功":"失败")+"\n          ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"filePath",label:"播放",width:"320px"},scopedSlots:t._u([{key:"default",fn:function(l){return[e("audio",{ref:"audio",attrs:{src:t.prefix+l.row.filePath.substring(37,l.row.filePath.length),controls:""}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(l){return[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteCallInfo(l.$index,l.row)}}},[t._v("删除\n          ")])]}}])})],1)],t._v(" "),e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.page,limit:t.limit},on:{"update:page":function(l){t.page=l},"update:limit":function(l){t.limit=l},pagination:t.changeList}})],2)},staticRenderFns:[]};var c=e("VU/8")(s,o,!1,function(t){e("+lfe")},"data-v-5515dc1e",null);l.default=c.exports}});
//# sourceMappingURL=17.64933e4aa775e50d6c64.js.map