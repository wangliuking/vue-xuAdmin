webpackJsonp([8],{UpN3:function(t,e){},njZ3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("3as3"),l=a("lbHh"),o=a.n(l),s={name:"groupList",data:function(){return{groupId:"",groupName:"",type:"",list:[],total:0,page:1,limit:10,dialogVisible:!1,dialogTitle:"",groupId_dialog:"",groupName_dialog:"",type_dialog:"",pttSilentTime_dialog:"",callTime_dialog:"",pttOnTime_dialog:"",options:[{id:1,name:"普通组"},{id:2,name:"外部组"},{id:3,name:"临时组"}],structures:[],power_dialog:"",addBtnStatus:!1,updateBtnStatus:!1,checkStatus:!0,oldGroupId:"",dialogVisible_batch:!1,dialogTitle_batch:"",groupId_dialog_batch:"",groupName_dialog_batch:"",type_dialog_batch:"",pttSilentTime_dialog_batch:"",callTime_dialog_batch:"",pttOnTime_dialog_batch:"",power_dialog_batch:"",checkStatus_batch:!0}},mounted:function(){this.searchList(),this.getStructureList()},methods:{getStructureList:function(){var t=this;this.$axios.get("structure/selectStructureList?structure="+this.$store.getters.info.role).then(function(e){console.log(e),t.structures=e.data.nodeList}).catch(function(t){console.log(t)})},deleteGroup_batch:function(){var t=this,e={groupId:this.groupId_dialog_batch,oldGroupId:this.$store.getters.info.role};this.$axios.post("group/deleteGroupBatch",e).then(function(){t.alertMessage("删除成功"),t.searchList()}).catch(function(e){t.alertMessage("删除失败"+e)}),this.dialogVisible_batch=!1},updateGroup_batch:function(){var t=this,e={groupId:this.groupId_dialog_batch,groupName:""===this.groupName_dialog_batch?null:this.groupName_dialog_batch,type:""===this.type_dialog_batch?-1:this.type_dialog_batch,pttSilentTime:""===this.pttSilentTime_dialog_batch?-1:this.pttSilentTime_dialog_batch,callTime:""===this.callTime_dialog_batch?-1:this.callTime_dialog_batch,pttOnTime:""===this.pttOnTime_dialog_batch?-1:this.pttOnTime_dialog_batch,power:""===this.power_dialog_batch?-1:this.power_dialog_batch,oldGroupId:this.$store.getters.info.role};this.$axios.post("group/updateGroupBatch",e).then(function(){t.alertMessage("修改成功"),t.searchList()}).catch(function(e){t.alertMessage("修改失败"+e)}),this.dialogVisible_batch=!1},addGroup_batch:function(){var t=this,e={groupId:this.groupId_dialog_batch,groupName:""===this.groupName_dialog_batch?null:this.groupName_dialog_batch,type:""===this.type_dialog_batch?-1:this.type_dialog_batch,pttSilentTime:""===this.pttSilentTime_dialog_batch?-1:this.pttSilentTime_dialog_batch,callTime:""===this.callTime_dialog_batch?-1:this.callTime_dialog_batch,pttOnTime:""===this.pttOnTime_dialog_batch?-1:this.pttOnTime_dialog_batch,power:""===this.power_dialog_batch?-1:this.power_dialog_batch};this.$axios.post("group/addGroupPatch",e).then(function(){t.alertMessage("添加成功"),t.searchList()}).catch(function(e){t.alertMessage("添加失败"+e)}),this.dialogVisible_batch=!1},deleteGroup:function(t,e){var a=this;console.log(t,e),this.$confirm("是否确认删除该条记录？ ID:"+e.groupId+"  组名:"+e.groupName,"确认删除",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){a.$axios.get("group/deleteGroup?groupId="+e.groupId).then(function(){a.alertMessage("删除成功"),a.searchList()}).catch(function(t){a.alertMessage("删除失败"+t)})}).catch(function(t){console.log(t)})},updateGroup:function(){var t=this,e={groupId:this.groupId_dialog,groupName:this.groupName_dialog,type:this.type_dialog,pttSilentTime:this.pttSilentTime_dialog,callTime:this.callTime_dialog,pttOnTime:this.pttOnTime_dialog,power:this.power_dialog,oldGroupId:this.oldGroupId};this.$axios.post("group/updateGroup",e).then(function(){t.alertMessage("更新成功"),t.searchList()}).catch(function(e){t.alertMessage("更新失败"+e)}),this.dialogVisible=!1},addGroup:function(){var t=this,e={groupId:this.groupId_dialog,groupName:this.groupName_dialog,type:this.type_dialog,pttSilentTime:this.pttSilentTime_dialog,callTime:this.callTime_dialog,pttOnTime:this.pttOnTime_dialog,power:this.power_dialog};this.$axios.post("group/addGroup",e).then(function(){t.alertMessage("添加成功"),t.searchList()}).catch(function(e){t.alertMessage("添加失败"+e)}),this.dialogVisible=!1},alertMessage:function(t){var e=this.$createElement;this.$message({message:e("p",null,[e("span",{style:"color: teal"},t)])})},checkGroupId_batch:function(){var t=this.groupId_dialog_batch;if(null===t||""===t)this.alertMessage("组ID不能为空");else if(-1==t.indexOf(",")&&-1==t.indexOf("-"))this.alertMessage("未识别到,或-符号");else if(-1!=t.indexOf(",")&&-1!=t.indexOf("-"))this.alertMessage("不能同时包含,或-符号");else if(-1!=t.indexOf(",,"))this.alertMessage("不能同时包含连续多个,符号");else if(-1!=t.indexOf("--"))this.alertMessage("不能同时包含多个-符号");else if(0==t.indexOf(",")||t.lastIndexOf(",")==t.length-1)this.alertMessage(",符号不能位于开头或结尾");else if(/^\d+(\.\d+)?$/.test(t.replace(/,/g,"").replace(/-/g,""))){if(-1!=t.indexOf(","))this.checkStatus_batch=!1;else if(-1!=t.indexOf("-")){var e=t.split("-");2!=e.length?this.alertMessage("-只能有一个"):""===e[0]||""===e[1]?this.alertMessage("-前后必须有数字"):parseInt(e[0])>=parseInt(e[1])?this.alertMessage("-左侧数必须小于右侧"):parseInt(e[1])-parseInt(e[0])>1e3?this.alertMessage("批量组数量大于1000，请缩小范围"):this.checkStatus_batch=!1}}else this.alertMessage("有非数字，请检查")},checkGroupId:function(){var t=this;this.$axios.get("group/checkGroupId?groupId="+this.groupId_dialog).then(function(e){console.log(e),e.data.data&&t.groupId_dialog!==t.oldGroupId?(t.checkStatus=!0,t.alertMessage("组ID已存在")):""===t.groupId_dialog?(t.checkStatus=!0,t.alertMessage("组ID不能为空")):t.checkStatus=!1}).catch(function(t){console.log(t)})},showUpdateDialog:function(t,e){console.log(e),this.dialogTitle="修改组",this.groupId_dialog=e.groupId,this.groupName_dialog=e.groupName,this.type_dialog=e.type,this.pttSilentTime_dialog=e.pttSilentTime,this.callTime_dialog=e.callTime,this.pttOnTime_dialog=e.pttOnTime,this.power_dialog=e.power,this.oldGroupId=e.groupId,this.addBtnStatus=!1,this.updateBtnStatus=!0,this.dialogVisible=!0,this.checkStatus=!1},showAddDialog:function(){this.dialogTitle="添加组",this.groupId_dialog="",this.groupName_dialog="",this.type_dialog="",this.pttSilentTime_dialog="",this.callTime_dialog="",this.pttOnTime_dialog="",this.power_dialog="",this.addBtnStatus=!0,this.updateBtnStatus=!1,this.dialogVisible=!0,this.checkStatus=!0},showDialog_batch:function(){this.dialogTitle_batch="批量操作",this.groupId_dialog_batch="",this.groupName_dialog_batch="",this.type_dialog_batch="",this.pttSilentTime_dialog_batch="",this.callTime_dialog_batch="",this.pttOnTime_dialog_batch="",this.power_dialog_batch="",this.dialogVisible_batch=!0,this.checkStatus_batch=!0},handleClose:function(t){t()},axiosUrl:function(){var t=this,e=(this.page-1)*this.limit,a=this.limit;this.$axios.get("group/groupList?start="+e+"&limit="+a+"&groupId="+this.groupId+"&groupName="+this.groupName+"&type="+this.type+"&structure="+this.$store.getters.info.role).then(function(e){t.list=e.data.data.list,t.total=e.data.data.total}).catch(function(t){console.log(t),o.a.remove("token"),location.reload()})},searchList:function(){this.page=1,this.axiosUrl()},changeList:function(t){t&&(this.limit=t.limit),this.axiosUrl()},clearInput:function(){this.groupId="",this.groupName="",this.type="",this.searchList()},filterHandler:function(t,e,a){return e[a.property]===t},formatter:function(t,e){return t.groupName},filterTag:function(t,e){return e.type===t}},components:{Pagination:i.a}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入组ID",maxlength:"30","show-word-limit":""},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}}),t._v(" "),a("el-input",{staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入组名称",maxlength:"50","show-word-limit":""},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}}),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择组类型"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("el-button",{staticClass:"searchBtn",attrs:{type:"success",loading:!1},on:{click:t.searchList}},[t._v("查 询")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:t.clearInput}},[t._v("清 空")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.showAddDialog}},[t._v("创 建")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.showDialog_batch}},[t._v("批量操作")]),t._v(" "),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),t._v(" "),a("el-table-column",{attrs:{prop:"groupId",label:"组ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"groupName",label:"组名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"组类型",filters:[{text:"普通组",value:1},{text:"外部组",value:2},{text:"临时组",value:3}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:1===e.row.type?"primary":2===e.row.type?"warning":"info","disable-transitions":""}},[t._v(t._s(1===e.row.type?"普通组":2===e.row.type?"外部组":"临时组")+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pttSilentTime",label:"PTT静默时长"}}),t._v(" "),a("el-table-column",{attrs:{prop:"callTime",label:"一次呼叫总得通话时间限定"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pttOnTime",label:"单次PTT授权最长时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"power",label:"组织结构"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.showUpdateDialog(e.$index,e.row)}}},[t._v("修改\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.deleteGroup(e.$index,e.row)}}},[t._v("删除\n          ")])]}}])})],1)],t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.page,limit:t.limit},on:{"update:page":function(e){t.page=e},"update:limit":function(e){t.limit=e},pagination:t.changeList}}),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"text",placeholder:"请输入组ID",maxlength:"30","show-word-limit":""},on:{focus:function(e){t.checkStatus=!0},blur:t.checkGroupId},model:{value:t.groupId_dialog,callback:function(e){t.groupId_dialog=e},expression:"groupId_dialog"}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"text",placeholder:"请输入组名",maxlength:"50","show-word-limit":""},model:{value:t.groupName_dialog,callback:function(e){t.groupName_dialog=e},expression:"groupName_dialog"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"number",placeholder:"请输入PTT静默时长(数字)",oninput:"if(value.length>11)value=value.slice(0,11);if(value<0)value=0"},model:{value:t.pttSilentTime_dialog,callback:function(e){t.pttSilentTime_dialog=e},expression:"pttSilentTime_dialog"}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"number",placeholder:"一次呼叫总得通话时间限定(数字)",oninput:"if(value.length>11)value=value.slice(0,11);if(value<0)value=0"},model:{value:t.callTime_dialog,callback:function(e){t.callTime_dialog=e},expression:"callTime_dialog"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"number",placeholder:"单次PTT授权最长时间(数字)",oninput:"if(value.length>11)value=value.slice(0,11);if(value<0)value=0"},model:{value:t.pttOnTime_dialog,callback:function(e){t.pttOnTime_dialog=e},expression:"pttOnTime_dialog"}})],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择组类型"},model:{value:t.type_dialog,callback:function(e){t.type_dialog=e},expression:"type_dialog"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择组织结构"},model:{value:t.power_dialog,callback:function(e){t.power_dialog=e},expression:"power_dialog"}},t._l(t.structures,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.addBtnStatus,expression:"addBtnStatus"}],attrs:{type:"primary",disabled:t.checkStatus},on:{click:t.addGroup}},[t._v("添 加")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.updateBtnStatus,expression:"updateBtnStatus"}],attrs:{type:"primary",disabled:t.checkStatus},on:{click:t.updateGroup}},[t._v("更 新")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle_batch,visible:t.dialogVisible_batch,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible_batch=e}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"text",placeholder:"请输入组ID",maxlength:"30","show-word-limit":""},on:{focus:function(e){t.checkStatus_batch=!0},blur:t.checkGroupId_batch},model:{value:t.groupId_dialog_batch,callback:function(e){t.groupId_dialog_batch=e},expression:"groupId_dialog_batch"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"text",placeholder:"请输入组名",maxlength:"50","show-word-limit":""},model:{value:t.groupName_dialog_batch,callback:function(e){t.groupName_dialog_batch=e},expression:"groupName_dialog_batch"}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"number",placeholder:"请输入PTT静默时长(数字)",oninput:"if(value.length>11)value=value.slice(0,11);if(value<0)value=0"},model:{value:t.pttSilentTime_dialog_batch,callback:function(e){t.pttSilentTime_dialog_batch=e},expression:"pttSilentTime_dialog_batch"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"number",placeholder:"一次呼叫总得通话时间限定(数字)",oninput:"if(value.length>11)value=value.slice(0,11);if(value<0)value=0"},model:{value:t.callTime_dialog_batch,callback:function(e){t.callTime_dialog_batch=e},expression:"callTime_dialog_batch"}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{staticClass:"dialogInput",attrs:{type:"number",placeholder:"单次PTT授权最长时间(数字)",oninput:"if(value.length>11)value=value.slice(0,11);if(value<0)value=0"},model:{value:t.pttOnTime_dialog_batch,callback:function(e){t.pttOnTime_dialog_batch=e},expression:"pttOnTime_dialog_batch"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择组类型"},model:{value:t.type_dialog_batch,callback:function(e){t.type_dialog_batch=e},expression:"type_dialog_batch"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择组织结构"},model:{value:t.power_dialog_batch,callback:function(e){t.power_dialog_batch=e},expression:"power_dialog_batch"}},t._l(t.structures,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible_batch=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.checkStatus_batch},on:{click:t.addGroup_batch}},[t._v("批量创建")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.checkStatus_batch},on:{click:t.updateGroup_batch}},[t._v("批量修改")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.checkStatus_batch},on:{click:t.deleteGroup_batch}},[t._v("批量删除")])],1)],1)],2)},staticRenderFns:[]};var r=a("VU/8")(s,n,!1,function(t){a("UpN3")},"data-v-e637f2b2",null);e.default=r.exports}});
//# sourceMappingURL=8.109a8882a7467d7f576e.js.map